<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>terraform</title>
        <link rel="stylesheet" href="./css/reveal.css">
        <link rel="stylesheet" href="./css/theme/night.css" id="theme">
        <link rel="stylesheet" href="./css/highlight/zenburn.css">
        <link rel="stylesheet" href="./css/print/paper.css" type="text/css" media="print">

    </head>
    <body>

        <div class="reveal">
            <div class="slides"><section  data-markdown><script type="text/template">

<!-- .slide: data-background="https://i1.wp.com/windowscustomization.com/wp-content/uploads/2018/09/flat-earth.gif" -->

## terraform ğŸŒ
### alguma coisa

@markito

<aside class="notes"><ul>
<li>mudei o nome pq sim, era com ansible mas isso fica pra prÃ³xima</li>
<li>os slides estÃ£o bem cru, o que importa sou eu aqui falando com vocÃªs</li>
</ul>
</aside></script></section><section ><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/811/1080/720" -->

pq ter uma talk sobre terraform? ğŸ§

- IaaC no geral parece ser algo mais comum nas empresas
- talvez tenha a possibilidade da gente ter que lidar com isso
- pq Ã© um assunto que eu curto ğŸ¤ª

<aside class="notes"><ul>
<li>Trombamo com isso no projeto passado</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/811/1080/720" -->

objetivo da talk ğŸ¯

- dar uma noÃ§Ã£o sobre o assunto
- melhorar a _pesquisabilidade_ caso apareÃ§a no futuro de vocÃªs

<aside class="notes"><ul>
<li>n sou expert em nada, entÃ£o posso esquecer algumas coisas<ul>
<li>ninguÃ©m vai sair especialista em nada aqui</li>
</ul>
</li>
</ul>
</aside></script></section></section><section ><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/811/1080/720" -->

mas... pra que serve esse treco? ğŸ¤µ

- possibilitar a **automatizaÃ§Ã£o** da tua infra
    - mÃ¡quinas virtuais no Google Cloud
    - queues no Amazon SQS

<aside class="notes"><ul>
<li>tecnicamaente Ã© sÃ³ cloud</li>
<li>Da pra usar com alguns serviÃ§os locais, tipo rabbitmq<ul>
<li>criar os tÃ³picos</li>
<li>outra coisa vai ter que subir teu servidor do rabbitmq</li>
</ul>
</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/811/1080/720" -->

<span class="fragment fade-out">blz, jÃ¡ sei pra que serve ğŸ‘</span>
<span class="fragment">mas o que exatamente Ã© `terraaform`? ğŸ¤”</span>

<ul class="fragment">
    <li>aplicaÃ§Ã£o CLI escrita em GO + conjunto de arquivos com a extensÃ£o `.tf`</li>
    <li><b>nÃ£o Ã© o que provisiona as tuas mÃ¡quinas</b></li>
</ul>

<aside class="notes"><ul>
<li>n provisiona: nÃ£o instala o ruby, somente cria as mÃ¡quinas</li>
<li>onde tu vai &quot;escrever a tua infra&quot;</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/811/1080/720" -->

e agora, porque usar? ğŸ“„ğŸ“ˆğŸ“Š

<ul>
    <li class="fragment">
        IaaC: automatizaÃ§Ã£o; testabilidade; processos; replicabilidade; documentaÃ§Ã£o.
    </li>
    <li class="fragment">Cross vendor (qualquer cloud)</li>
    <li class="fragment">Bem mantido e ativo</li>
</ul>

<aside class="notes"><ul>
<li>Muitos dos benefÃ­cios vem de IaaC como um todo<ul>
<li>processos: ao redor da mudanÃ§a da tua infra</li>
<li>automatizaÃ§Ã£o: replicabilidade</li>
<li>confiabilidade:</li>
</ul>
</li>
<li>poderia ser cloudformation (mas nÃ£o ser Ã© melhor? vendor lock-in)</li>
<li>Ã© bem mantido, tem uma empresa por trÃ¡s (hashicorp)</li>
</ul>
</aside></script></section></section><section ><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/172/1080/720" -->

o mÃ­nimo para fazer alguma coisa ğŸ’¡
</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/172/1080/720" -->

conceitinhos ğŸ“š

<ul>
    <li style="position:absolute;left: 35%" class="fragment fade-out">
        <em><code>*.tf</code> files</em>
        <ul>
            <li>
                <a href="https://www.terraform.io/docs/providers/index.html">providers</a>
                <ul><li>aws, digital ocean</li></ul>
            </li>
            <li>
                resources
                <ul>
                    <li>mÃ¡quinas virtuais no EC2</li>
                    <li>banco de dados no RDS</li>
                    <li>buckets no S3</li>
                </ul>
            </li>
        </ul>
    </li>
    <li style="position:absolute;left: 35%" class="fragment">
        <em>state</em>
        <ul>
            <li>
                <a href="https://www.terraform.io/docs/backends/types/index.html">backends</a>
                <ul><li>pode ser um arquivo local ou S3 por exemplo</li>
            </li>
        </ul>
    </li>
</ul>

<aside class="notes"><ul>
<li>tf files<ul>
<li>providers: onde sÃ£o criadas as coisas;</li>
<li>resources: as coisas que tu cria;</li>
<li>cada provider tem seu subset de resources: aws != DO</li>
</ul>
</li>
<li>state<ul>
<li>assim que o terraform mantÃ©m o histÃ³rico e sabe o que criar ou destruir</li>
<li>Ã© um arquivo json basicamente</li>
<li>onde ficam as referÃªncias das coisas que tu criou <strong>pelo terraform</strong></li>
</ul>
</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/172/1080/720" -->

comandinhos ğŸ’»

- `init`
    - inicializa o repositÃ³rio tf, baixa as "depedÃªncias" (providers, backends)
    - sincroniza o state "remoto" com o local
</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/172/1080/720" -->

comandinhos ğŸ’»

- `plan`
    - planeja qualquer mudanÃ§a que vocÃª fizer nos arquivos (criaÃ§Ã£o, destruiÃ§Ã£o)
</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/172/1080/720" -->

comandinhos ğŸ’»

- `apply`
    - "commita" as mudanÃ§as que vocÃª checou no `plan`
</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/172/1080/720" -->

hora das coisas darem errado ğŸš¨
</script></section></section><section ><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/681/1080/720" -->

mais do que o mÃ­nimo ğŸ•¯
</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/681/1080/720" -->

conceitinhos ğŸ“š

- `*.tf` files
    - data
    - _variables_
        - `TF_VAR_variable`
        - `-var-file=`
    - referÃªncias cruzadas
</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/681/1080/720" -->

comandinhos ğŸ’»

- `fmt`
    - formata os arquivos
-  `validate`
    - valida os arquivos
</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/681/1080/720" -->

comandinhos ğŸ’»

- `plan` e `apply`
    - argumento `-plan-file=`
</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/172/1080/720" -->

hora das coisas darem errado ğŸš¨
</script></section></section><section ><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/1031/1080/720" -->

agora o bagui Ã© loco ğŸ”¥
</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/1031/1080/720" -->

conceitinhos ğŸ“š

- modules
    - cÃ³digo externo, organizaÃ§Ã£o de cÃ³digo, coisas reutilizÃ¡veis

<aside class="notes"><ul>
<li>Modulo base</li>
<li>tipo heranÃ§a</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/1031/1080/720" -->

conceitinhos ğŸ“š

- [provisioners](https://www.terraform.io/docs/provisioners/index.html)
    - script
    - chef
- workspace
    - diferentes ambientes, mesma infra
        - qa vs prod

<aside class="notes"><ul>
<li>provisioner<ul>
<li>Ã© o que vai instalar os teus pacotes</li>
<li>nÃ£o cheguei a usar mt, sÃ³ o de ansible</li>
<li>usei docker images e packer</li>
<li>podem ser plugins comunitÃ¡rios</li>
</ul>
</li>
<li>workspaces<ul>
<li>mesma infra, diferentes ambientes</li>
</ul>
</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/1031/1080/720" -->

conceitinhos ğŸ“š / comandinhos ğŸ’»

- import
- output

<aside class="notes"><ul>
<li>import: infra que jÃ¡ existe e quer trackear pelo tf</li>
<li>output: informaÃ§Ãµes que podem ser mostradas no console</li>
</ul>
</aside></script></section></section><section ><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/1022/1080/720" -->

extras ğŸ
</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="https://picsum.photos/id/1022/1080/720" -->

- provisionaamento (ansible)
- packer, docker images (usar imagens pra nÃ£o precisar provisionar)
- vault, aws secrets manager, gerenciamento de secrets
- cloud-formation, especÃ­fico da aws</script></section></section></div>
        </div>

        <script src="./lib/js/head.min.js"></script>
        <script src="./js/reveal.js"></script>

        <script>
            function extend() {
              var target = {};
              for (var i = 0; i < arguments.length; i++) {
                var source = arguments[i];
                for (var key in source) {
                  if (source.hasOwnProperty(key)) {
                    target[key] = source[key];
                  }
                }
              }
              return target;
            }

            // Optional libraries used to extend on reveal.js
            var deps = [
              { src: './lib/js/classList.js', condition: function() { return !document.body.classList; } },
              { src: './plugin/markdown/marked.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
              { src: './plugin/markdown/markdown.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
              { src: './plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
              { src: './plugin/zoom-js/zoom.js', async: true },
              { src: './plugin/notes/notes.js', async: true },
              { src: './plugin/math/math.js', async: true }
            ];

            // default options to init reveal.js
            var defaultOptions = {
              controls: true,
              progress: true,
              history: true,
              center: true,
              transition: 'default', // none/fade/slide/convex/concave/zoom
              dependencies: deps
            };

            // options from URL query string
            var queryOptions = Reveal.getQueryHash() || {};

            var options = {"transition":"slide"};
            options = extend(defaultOptions, options, queryOptions);
        </script>


        <script>
            Reveal.initialize(options);
        </script>
    </body>
</html>
